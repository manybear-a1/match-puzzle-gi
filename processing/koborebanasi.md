# 元ネタ

グラフ同型判定問題(https://ja.wikipedia.org/wiki/%E3%82%B0%E3%83%A9%E3%83%95%E5%90%8C%E5%9E%8B)
(https://en.wikipedia.org/wiki/Graph_isomorphism_problem)

一般的なパズルはNP完全なことが多いらしいが、この問題がNP完全に属するかは未解決問題。ちなみに今回のパズルは同型であることが分かったうえで、その同型写像たちを最小の互換で作るような問題なので厳密には別物である。

# 総盤面数
右のグラフの辺の種類数が9 * 8 / 2 = 36 なので2^36以上で、
右の盤面を固定した時の左の盤面数が多くとも9!なので2^36 * 9!以下になるところまで判明した。厳密な値を出すのは諦めた。

# 最短手数

1回の交換で到達できる盤面,2回の交換で到達できる盤面,3回の交換で到達できる盤面,...

というような形で順にBFSをしていきそれぞれの盤面が目標のグラフと同じになっているかを判定すれば求められる。

また最短手数は9手以下である。

これは9頂点の任意の置換が9つの互換で合成できることから従う。これを証明する。

頂点に1,2...,9とインデックスをふる。このとき、頂点の任意の置換は1から9の順列で表される。この置換を先頭から作ることを考える。

例として3,2,1,6,7,5,4,9,8という置換を先頭から作る。

最初の置換は1,2,3,4,5,6,7,8,9である。先頭を3にしたいので1と3を交換する。

置換は3,2,1,4,5,6,7,8,9になる。二番目と三番目はすでにそろっている。次に四番目を6にしたいので4と6を交換する。

置換は3,2,1,6,5,4,7,8,9になる。五番目を7にしたいので5と7を交換する。

置換は3,2,1,6,7,4,5,8,9になる。六番目を5にしたいので4と5を交換する。

置換は3,2,1,6,7,5,4,8,9になる。七番目はすでにそろっている。次に八番目を9にしたいので8と9を交換する。

置換は3,2,1,6,7,5,4,9,8になる。合成した互換の数は5個。

このように先頭から一つずつそろえることで、一つ揃えるたびに最大でも一つしか互換が必要ないことから、最短手数が9手以下になることがいえる。（ちなみに、最後の一回分は自動的にそろうので最短手数は8手以下も証明できる。）

ちなみに、なぜか、行うことが確定している操作（strategy.mdを参照）を繰り返すだけでほとんどの場合最短手数を達成できる。理由は不明。