# 戦略
このパズルを解く際に有用な戦略を紹介します。


- マッチ棒だけでなく、頂点に結びついているマッチ棒の数（これ以降は次数と表記）も頂点ごとにそろえる問題としてよい。つまり
- 次数が違う頂点はそれぞれ独立に考えてよい。
  
  例として、ある盤面において次数が2の頂点を考える。その頂点が移動する可能性がある位置は、一致させようとしているパターンの頂点の位置の内、その位置の頂点の次数が2である位置のみである。つまり、次数が3や0である頂点の位置に移動することはない。
  
  また、揃えたいパターンにある同じ次数の頂点の個数と操作するマッチ棒にある同じ次数の頂点の個数は必ず一致する。つまり、揃えたいパターンと操作するマッチ棒の頂点の次数の多重集合は必ず一致する。（そうでなければその盤面のパズルは解くことができない）

  例として適当な盤面の次数のみを表記した表を考える。（今はマッチ棒のつながり方は考えない）
    |       |  列1  |  列2  |  列3  | 列1'  | 列2'  | 列3'  |
    | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
    |  行1  |   0   |   1   |   2   |   4   |   1   |   2   |
    |  行2  |   1   |   2   |   4   |   2   |   1   |   0   |
    |  行3  |   2   |   0   |   1   |   0   |   1   |   2   |
   
  例えば1行2列目の次数が1の頂点を考える。この頂点はパターンの頂点の次数から1行2列目か2行2列目、3行2列目のどれかに移動することが分かる。

  （雑談：実はそれぞれの頂点がこの次数になる盤面は存在しない。）

- 次数が0の頂点は（上の条件をみたすなら、つまり、一致させようとしているパターンの次数が0の頂点の位置のどれかであるなら、）どのように並び替えてもパターンと一致する。
  
  なぜなら、結びついているマッチ棒がないので次数が0の頂点同士を区別することができないからだ。

  例として適当な盤面の次数のみを表記した表を考える。（上の例と同じ表）
   |       |  列1  |  列2  |  列3  | 列1'  | 列2'  | 列3'  |
   | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
   |  行1  |   0   |   1   |   2   |   4   |   1   |   2   |
   |  行2  |   1   |   2   |   4   |   2   |   1   |   0   |
   |  行3  |   2   |   0   |   1   |   0   |   1   |   2   |
  
  このとき1行1列目の次数が0の頂点は3行1列目、2行3列目のどちらに動かしてもよい。

- ある頂点を考えたとき、その頂点の次数と同じである頂点がほかに存在しないとき、その頂点の位置は一意に定まる。
  
  なぜなら、次数が違う頂点はそれぞれ独立に考えてよい。したがって、その頂点が移動する可能性がある位置は一つしかなく一意に定まるからだ。

  例として適当な盤面の次数のみを表記した表を考える。（上の例と同じ表）
   |       |  列1  |  列2  |  列3  | 列1'  | 列2'  | 列3'  |
   | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
   |  行1  |   0   |   1   |   2   |   4   |   1   |   2   |
   |  行2  |   1   |   2   |   4   |   2   |   1   |   0   |
   |  行3  |   2   |   0   |   1   |   0   |   1   |   2   |

   このとき1行3列目の次数が4の頂点は1行1列目に動かすしかない。


- すでに位置が確定したある頂点を考える。この頂点から一本のマッチ棒でつながっている（以降、隣接すると表記）頂点の集合を考える。このときその集合に含まれるある頂点の次数が、集合の内の自分自身以外のどの頂点の次数とも異なる場合、その頂点の位置は一意に定まる。

- 同じ頂点に隣接している次数1の頂点の位置は互いに交換可能である。